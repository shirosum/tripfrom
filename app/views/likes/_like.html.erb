<% if user_signed_in? %>

    <% unless post.like_user(current_user.id).blank? %>
        <div class="vertical_like">
            <%= link_to post_like_path(post_id: post.id, id: post.likes[0].id), method: :delete, remote: true do %>
                    <i class="fas fa-heart"></i>
            <% end %>
            <% if post.liked_users.count > 0 %>
                <label for="trigger" class="open_button">
                    <%= post.liked_users.count %>件のいいね
                </label>
            <% end %>
        </div>
    <% else %>
        <div class="vertical_like">
            <%= link_to post_likes_path(post.id), method: :post, remote: true do %>
                <i class="far fa-heart"></i>
            <% end %>
            <% if post.liked_users.count > 0 %>
                <label for="trigger" class="open_button">
                    <%= post.liked_users.count %>件のいいね
                </label>
            <% end %>
        </div>
    <% end %>

<% else %>

    <% if post.liked_users.count > 0 %>
        <div class="vertical-icons">
            <i class="far fa-heart"></i>
        </div>
    <% else %>
        <div class="vertical-icons">
            <i class="far fa-heart"></i>
        </div>
    <% end %>

<% end %>


<div class="modal_wrap">
    <input id="trigger" type="checkbox">
    <div class="modal_overlay">
        <label for="trigger" class="modal_trigger"></label>
        <div class="modal_content">
            <label for="trigger" class="close_button">✖️</label>
            <p><strong>いいねしたユーザー</strong></p>
            <div>
                <% post.liked_users.each do |user|%>
                    <%= link_to user_path(user) do %>
                        <li><%= user.user_name %></li>
                    <% end %>
                <% end %>
            </div>
        </div>
    </div>
</div>